# 分布式常见场景解决方案实战

D:\XXX二期-evp\（11）分布式常见场景解决方案实战——Peter老师\01-2019.11.17-缓存解决方案实战





高并发场景第一定律：

> 1. CDN\加缓存、
> 2. 动态页面静态化、
> 3. 集群、
> 4. 拆字诀（分布式）、
> 5. 同步转异步、
> 6. 限流熔断降级



什么样的数据适合缓存？

> 1. 访问频率高
> 2. 更改频率低
> 3. 一致性要求不高------因为同一数据有两份，必须允许存在一定的不一致性



缓存效能

> 1. 2\8定律：20%的数据承接了80%的访问量，缓存处理掉这部分热点数据。



注意点：

> 1、**双删：**修改数据前删一次key，删除完了之后再删一次。
>
> 删除缓存key
>
> 更新DB的key
>
> 删除缓存key
>
> 说明：①更新DB的时候，另外的线程读取了一次值又设置回老值了。②只要后面的删除呢？也有问题：更新DB成功了，但是删除缓存key失败了（分布式场景下不可靠）。

> 2、MQ重要的功能就是**“甩锅”**
>
> 3、缓存一致性的问题，无论怎么处理，都有漏洞 ------ redis\ES\mongoDB
>
> 











